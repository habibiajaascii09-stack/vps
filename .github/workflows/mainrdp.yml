      - name: Install & Start Tailscale (Metode Link Interaktif)
        run: |
          # 1. Instalasi Tailscale Langsung (Bukan via Docker)
          echo "Menginstal Tailscale..."
          curl -fsSL https://pkgs.tailscale.com/stable/ubuntu/jammy.no-tardist.asc | sudo tee /usr/share/keyrings/tailscale-archive-keyring.gpg >/dev/null
          curl -fsSL https://pkgs.tailscale.com/stable/ubuntu/jammy.tailscale-archive.list | sudo tee /etc/apt/sources.list.d/tailscale.list
          sudo apt update -y
          sudo apt install -y tailscale

          # 2. Menjalankan Tailscale (Ini akan mencetak link otorisasi)
          echo "Menjalankan tailscale up..."
          echo "PERINGATAN: RUNNER AKAN MACET DI SINI MENUNGGU OTORISASI!"
          echo "Cek Log untuk Link Otorisasi (Anda harus mengklik link dalam 5 menit)."
          
          # Jalankan tailscale up. Timeout step ini diatur oleh timeout-minutes: 360 di job level
          # Kami tambahkan timeout 5 menit di sini untuk menghindari runner stuck selamanya.
          # Jika Anda tidak mengklik link dalam 5 menit, step ini akan gagal,
          # tapi workflow akan berlanjut karena kita tidak mau membuat pekerjaan stuck.
          
          timeout 300 tailscale up --accept-routes || true
          
          # Tunggu sebentar dan coba dapatkan IP
          sleep 10
          TS_IP=$(tailscale ip -4 2>/dev/null || true)

          if [ -n "$TS_IP" ]; then
            echo "✅ Tailscale IP berhasil didapatkan: $TS_IP"
          else
            echo "❌ Gagal mendapatkan IP Tailscale. Anda mungkin perlu mengotorisasi secara manual setelah SSH."
          fi
